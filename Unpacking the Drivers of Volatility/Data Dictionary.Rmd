---
title: "Data Dictionary"
author: "Christian Guallpa"
date: "04-21-2023"
output:
  tufte::tufte_html: 
    tufte_features: ["fonts",  "italics"]
  tufte::tufte_handout: default
---

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)

#packages in use

library(ggplot2)
library(dplyr)
library(readr)
library(tidyr)
library(gridExtra)
library(tufte)
library(tidyverse)
library(lubridate)
library(reshape2)

```

```{r data sets, include=FALSE, echo=FALSE}

#Data Sets 

volatility = read.csv('Volatility.csv')
volatility = volatility[c('Date', 'Inflation', 'DollarIndex')]

apple_financials = read.csv('Apple_Financials.csv')
apple_financials = apple_financials[-c(138:151), ] # Remove NaN

apple_stock = read.csv('Apple_Stock.csv')
apple_stock = apple_stock[c('Date', 'Adj.Close', 'Volume')]
apple_stock = right_join(apple_stock, volatility)

apple_stock = apple_stock[-c(0:253), ] # No information for Inflation and Dollar Index
apple_stock = apple_stock[apple_stock$Inflation != '.', ] 
apple_stock = apple_stock[apple_stock$DollarIndex != '.', ] 

apple_returns = diff(log(apple_stock$Adj.Close))
apple_stock = apple_stock[-1, ]
apple_stock$LogReturn = apple_returns

google_financials = read.csv('Google_Financials.csv')
google_financials = google_financials[-c(76, 77, 78), ] # Remove NaN

google_stock = read.csv('Google_Stock.csv')
google_stock = google_stock[c('Date', 'Adj.Close', 'Volume')]
google_stock = right_join(google_stock, volatility)

google_stock = google_stock[-c(0:253), ] # No information for Inflation and Dollar Index
google_stock = google_stock[google_stock$Inflation != '.', ] 
google_stock = google_stock[google_stock$DollarIndex != '.', ] 

google_returns = diff(log(google_stock$Adj.Close))
google_stock = google_stock[-1, ]
google_stock$LogReturn = google_returns

economics = read.csv('Economics.csv')
economics = economics[-c(200:364), ]

```

# Financial Variables:

The number of missing values (NA) is shown below. 

**Below are the ranges for each variable and company**

```{r desired financials, include=FALSE, echo=FALSE}

desired_financials = c('TotalAssets', 'Receivables', 'Payables', 'EBIT', 'TotalRevenue', 'InvestedCapital', 'TotalDebt', 
                       'InvestingCashFlow', 'CommonStock', 'GrossProfit', 'TotalExpenses', 'StockholdersEquity')

```

For the financial data sets, there are approximately 206 different variables, so 
we will concentrate on the few important ones for this project (more could 
possibly be examined in the future). 

Date: When the entries were filed or collected. The date variable ranges from the 
end of 1986 to the end of 2022 (varies for each company - Apple starts at 1986 and 
Google starts at 2004).

**The following financial variables are numeric (double) and are measured in dollars**  

Total Assets: The entire value of everything that a company or individual owns or controls. 

Receivables: The money that is owed to a company or an individual for goods or 
services that have been sold but not yet paid for. 

EBIT: (Earnings Before Interest and Taxes) A financial metric that represents a 
company's profitability before taking into account the impact of interest expenses and taxes.

Total Revenue: The total amount of money generated by a company or organization 
from the sale of its products or services within a specific period of time, 
usually a fiscal quarter or year (fiscal quarter for this project).

Total Debt: The sum of all outstanding debt that a company or individual owes to
creditors, lenders or financial institutions.

Invested Capital: The total amount of capital that has been invested in a company 
or business, including both equity and debt financing.

Common Stock: The basic type of ownership share that is issued by a corporation 
or company to its shareholders.

Investing Cash Flow: A category of cash flow that represents the cash flows that 
are associated with a company's investments in long-term assets or other non-current assets.

Gross Profit: The profit a company makes after deducting the direct costs 
associated with producing or delivering its products or services.

Total Expenses: The costs incurred by a company in order to generate revenue and
operate its business.

Stockholders Equity: The residual claim on a company's assets after deducting its
liabilities. It represents the amount of a company's assets that are financed by 
the owners rather than by creditors

**Apple's Financial Distribution**

```{r apple financials, include=TRUE, echo=FALSE}

apple_financials$Date = mdy(apple_financials$Date) #Convert from character to date
apple_financials[desired_financials] <- lapply(apple_financials[desired_financials], gsub, pattern = ",", replacement = "") #Remove commas for R

apple_financials = apple_financials %>%
                    mutate_at(desired_financials, as.double) #Convert from character to a numeric (double) variable

summary(apple_financials[c('Date', desired_financials)])

```

**Google's Financial Distribution**

```{r google financials, include=TRUE, echo=FALSE}

suppressWarnings({

google_financials$Date = mdy(google_financials$Date) #Convert from character to a date variable
google_financials[desired_financials] <- lapply(google_financials[desired_financials], gsub, pattern = ",", replacement = "") #Remove commas for R

google_financials = google_financials %>%
                    mutate_at(desired_financials, as.double) #Convert from character to a numeric (double) variable

summary(google_financials[c('Date', desired_financials)])

})

```

# Stock Variables:  

**Below are the ranges for each variable and company**

```{r desired stock, include=FALSE, echo=FALSE}

desired_stock = c('Adj.Close', 'Volume', 'Inflation', 'DollarIndex', 'LogReturn')

```

Date: When the entries were filed or collected. The date variable ranges from the 
beginning of 2006 to the end of 2021.

Volume: The total number of shares of a stock or other financial asset that have
been traded during a specific period of time, usually a trading day. The numeric 
(double) variable is measured as a total quantity. The ranges depends on the 
company (volume distribution for each company will be shown below).

Inflation: A market-based measure of the rate at which the general level of 
prices for goods and services is increasing over time expectations for the next 
10 years. The numeric (double) variable is measured as a proportion, representing
the difference between the yield of a nominal 10-year Treasury bond and the 
yield of a 10-year Treasury inflation-protected security (TIPS).

Dollar Index: A measure of the value of the U.S. dollar relative to a basket of 
currencies from major U.S. trading partners. The numeric (double) variable is 
measured as an index, where changes in the index represent the percentage change
in the dollar index.

Log Return: A financial metric that measures the relative change in the price 
of a security or asset over a specific period of time. It is calculated by 
taking the natural logarithm of the ratio of the price at the end of the period 
to the price at the beginning of the period.The numeric (double) variable is 
unitless as it is defined as the logarithmic difference between two adjusted close prices

**The following stock variables are numeric (double) and are measured in dollars** 

Adj. Close: The stock price that has been adjusted to reflect any corporate
actions that may have occurred, such as stock splits, dividends, or spin-offs.

**Apple's Stock Distribution**

```{r apple stock, include=TRUE, echo=FALSE}

apple_stock$Date = mdy(apple_stock$Date) #Convert from character to a date variable

apple_stock = apple_stock %>%
                    mutate_at(c('Inflation', 'DollarIndex'), as.double) #Convert from character to a numeric (double) variable

summary(apple_stock[c('Date', desired_stock)])

```

**Google's Stock Distribution**

```{r google stock, include=TRUE, echo=FALSE}

google_stock$Date = mdy(google_stock$Date) #Convert from character to a date variable

google_stock = google_stock %>%
                    mutate_at(c('Inflation', 'DollarIndex'), as.double) #Convert from character to a numeric (double) variable

summary(google_stock[c('Date', desired_stock)])

```

# Economic Variables: 

The number of missing values (NA) is shown below. 

**Below are the ranges for each variable**

```{r desired economics, include=FALSE, echo=FALSE}

desired_economics = c('InterestRate', 'UnemploymentRate', 'TotalDebt', 'GDP')

```

Date: When the entries were filed or collected. The date variable ranges from the 
beginning of 2005 to the end of 2021.

Interest Rate: The rate of cost of borrowing money at which eligible financial 
institutions can borrow money directly from the Federal Reserve. The numeric 
(double) variable is measured in a proportion. 

Unemployment Rate: A measure of the percentage of the labor force that is 
currently unemployed and actively seeking employment. The numeric (double) variable
is measured in a proportion. 

Total Debt: The amount of money owed by the federal government of the United 
States to creditors. The numeric (double) variable is measured in millions of dollars.

GDP: (Gross Domestic Product) Economic indicator that measures the total value 
of all goods and services produced within a country's borders in a specific 
period, usually a year or a quarter (quarter for this project). The numeric 
(double) variable is measured in billions of dollars.

```{r economics, include=TRUE, echo=FALSE}

economics$Date = mdy(economics$Date) #Convert from character to a date variable
summary(economics[c('Date', desired_economics)])

```
